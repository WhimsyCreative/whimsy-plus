function acp_get_alpha_value_from_color(a){var l;return a=a.replace(/ /g,""),a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(l=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),l=parseInt(l)):l=100,l}function acp_update_alpha_value_on_color_control(a,l,o,e){var r,t,i;r=l.data("a8cIris"),t=l.data("wpWpColorPicker"),r._color._alpha=a,i=r._color.toString(),l.val(i),t.toggler.css({"background-color":i}),e&&acp_update_alpha_value_on_alpha_slider(a,o),l.wpColorPicker("color",i)}function acp_update_alpha_value_on_alpha_slider(a,l){l.slider("value",a),l.find(".ui-slider-handle").text(a.toString())}Color.prototype.toString=function(a){if("no-alpha"==a)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var l=parseInt(this._color,10).toString(16);if(this.error)return"";if(l.length<6)for(var o=6-l.length-1;o>=0;o--)l="0"+l;return"#"+l},jQuery(document).ready(function(a){a(".alpha-color-control").each(function(){var l,o,e,r,t,i,c,n,p,_,s;l=a(this),o=l.val().replace(/\s+/g,""),e=l.attr("data-palette"),r=l.attr("data-show-opacity"),t=l.attr("data-default-color"),i=-1!==e.indexOf("|")?e.split("|"):"false"==e?!1:!0,c={change:function(a,o){var e,r,i,c;e=l.attr("data-customize-setting-link"),r=l.wpColorPicker("color"),t==r&&(i=acp_get_alpha_value_from_color(r),p.find(".ui-slider-handle").text(i)),wp.customize(e,function(a){a.set(r)}),c=n.find(".transparency"),c.css("background-color",o.color.toString("no-alpha"))},palettes:i},l.wpColorPicker(c),n=l.parents(".wp-picker-container:first"),a('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(n.find(".wp-picker-holder")),p=n.find(".alpha-slider"),_=acp_get_alpha_value_from_color(o),s={create:function(l,e){var r=a(this).slider("value");a(this).find(".ui-slider-handle").text(r),a(this).siblings(".transparency ").css("background-color",o)},value:_,range:"max",step:1,min:0,max:100,animate:300},p.slider(s),"true"==r&&p.find(".ui-slider-handle").addClass("show-opacity"),n.find(".min-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(0,l,p,!0)}),n.find(".max-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(100,l,p,!0)}),n.find(".iris-palette").on("click",function(){var o,e;o=a(this).css("background-color"),e=acp_get_alpha_value_from_color(o),acp_update_alpha_value_on_alpha_slider(e,p),100!=e&&(o=o.replace(/[^,]+(?=\))/,(e/100).toFixed(2))),l.wpColorPicker("color",o)}),n.find(".button.wp-picker-clear").on("click",function(){var a=l.attr("data-customize-setting-link");l.wpColorPicker("color","#ffffff"),wp.customize(a,function(a){a.set("")}),acp_update_alpha_value_on_alpha_slider(100,p)}),n.find(".button.wp-picker-default").on("click",function(){var a=acp_get_alpha_value_from_color(t);acp_update_alpha_value_on_alpha_slider(a,p)}),l.on("input",function(){var l=a(this).val(),o=acp_get_alpha_value_from_color(l);acp_update_alpha_value_on_alpha_slider(o,p)}),p.slider().on("slide",function(o,e){var r=parseFloat(e.value)/100;acp_update_alpha_value_on_color_control(r,l,p,!1),a(this).find(".ui-slider-handle").text(e.value)})})});